{"ast":null,"code":"var _jsxFileName = \"/Users/ewang/Documents/Github/ascii-renderer/src/components/DynamicModel.js\",\n  _s = $RefreshSig$();\nimport { useRef, useEffect } from 'react';\nimport { useLoader } from '@react-three/fiber';\nimport { useGLTF } from '@react-three/drei';\nimport * as THREE from 'three';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function DynamicModel(_ref) {\n  _s();\n  var url = _ref.url,\n    type = _ref.type;\n  var modelRef = useRef();\n  var centerAndScaleObject = function centerAndScaleObject(object) {\n    var box = new THREE.Box3().setFromObject(object);\n    var center = box.getCenter(new THREE.Vector3());\n    var size = box.getSize(new THREE.Vector3());\n    var maxDim = Math.max(size.x, size.y, size.z);\n    var scale = 4 / maxDim;\n    if (modelRef.current) {\n      modelRef.current.position.set(-center.x, -center.y, -center.z);\n      modelRef.current.scale.setScalar(scale);\n    }\n  };\n\n  // Handle GLTF/GLB files\n  if (type === 'glb' || type === 'gltf') {\n    var gltf = useGLTF(url);\n    useEffect(function () {\n      if (gltf.scene) {\n        centerAndScaleObject(gltf.scene);\n      }\n    }, [gltf]);\n    return /*#__PURE__*/_jsxDEV(\"group\", {\n      ref: modelRef,\n      children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n        object: gltf.scene\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Handle FBX files\n  if (type === 'fbx') {\n    try {\n      var fbx = useLoader(FBXLoader, url);\n      useEffect(function () {\n        if (fbx) {\n          centerAndScaleObject(fbx);\n\n          // Apply materials and shadows\n          fbx.traverse(function (child) {\n            if (child.isMesh) {\n              child.castShadow = true;\n              child.receiveShadow = true;\n\n              // Ensure material is visible in ASCII renderer\n              if (child.material) {\n                child.material.color = new THREE.Color('white');\n                child.material.needsUpdate = true;\n              }\n            }\n          });\n        }\n      }, [fbx]);\n      return /*#__PURE__*/_jsxDEV(\"group\", {\n        ref: modelRef,\n        children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n          object: fbx\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this);\n    } catch (error) {\n      console.error('Error loading FBX:', error);\n      return null;\n    }\n  }\n\n  // Handle OBJ files\n  if (type === 'obj') {\n    var obj = useLoader(OBJLoader, url);\n    useEffect(function () {\n      if (obj) {\n        centerAndScaleObject(obj);\n      }\n    }, [obj]);\n    return /*#__PURE__*/_jsxDEV(\"group\", {\n      ref: modelRef,\n      children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n        object: obj\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n}\n_s(DynamicModel, \"CdB3VPsrJ5QVjhIKdehQaKr+cuY=\", false, function () {\n  return [useGLTF, useLoader, useLoader];\n});\n_c = DynamicModel;\nvar _c;\n$RefreshReg$(_c, \"DynamicModel\");","map":{"version":3,"names":["useRef","useEffect","useLoader","useGLTF","THREE","FBXLoader","OBJLoader","jsxDEV","_jsxDEV","DynamicModel","_ref","_s","url","type","modelRef","centerAndScaleObject","object","box","Box3","setFromObject","center","getCenter","Vector3","size","getSize","maxDim","Math","max","x","y","z","scale","current","position","set","setScalar","gltf","scene","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","fbx","traverse","child","isMesh","castShadow","receiveShadow","material","color","Color","needsUpdate","error","console","obj","_c","$RefreshReg$"],"sources":["/Users/ewang/Documents/Github/ascii-renderer/src/components/DynamicModel.js"],"sourcesContent":["import { useRef, useEffect } from 'react'\nimport { useLoader } from '@react-three/fiber'\nimport { useGLTF } from '@react-three/drei'\nimport * as THREE from 'three'\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\n\nexport function DynamicModel({ url, type }) {\n  const modelRef = useRef()\n\n  const centerAndScaleObject = (object) => {\n    const box = new THREE.Box3().setFromObject(object)\n    const center = box.getCenter(new THREE.Vector3())\n    const size = box.getSize(new THREE.Vector3())\n\n    const maxDim = Math.max(size.x, size.y, size.z)\n    const scale = 4 / maxDim\n\n    if (modelRef.current) {\n      modelRef.current.position.set(-center.x, -center.y, -center.z)\n      modelRef.current.scale.setScalar(scale)\n    }\n  }\n\n  // Handle GLTF/GLB files\n  if (type === 'glb' || type === 'gltf') {\n    const gltf = useGLTF(url)\n    \n    useEffect(() => {\n      if (gltf.scene) {\n        centerAndScaleObject(gltf.scene)\n      }\n    }, [gltf])\n\n    return (\n      <group ref={modelRef}>\n        <primitive object={gltf.scene} />\n      </group>\n    )\n  }\n\n  // Handle FBX files\n  if (type === 'fbx') {\n    try {\n      const fbx = useLoader(FBXLoader, url)\n      \n      useEffect(() => {\n        if (fbx) {\n          centerAndScaleObject(fbx)\n          \n          // Apply materials and shadows\n          fbx.traverse((child) => {\n            if (child.isMesh) {\n              child.castShadow = true\n              child.receiveShadow = true\n              \n              // Ensure material is visible in ASCII renderer\n              if (child.material) {\n                child.material.color = new THREE.Color('white')\n                child.material.needsUpdate = true\n              }\n            }\n          })\n        }\n      }, [fbx])\n\n      return (\n        <group ref={modelRef}>\n          <primitive object={fbx} />\n        </group>\n      )\n    } catch (error) {\n      console.error('Error loading FBX:', error)\n      return null\n    }\n  }\n\n  // Handle OBJ files\n  if (type === 'obj') {\n    const obj = useLoader(OBJLoader, url)\n    \n    useEffect(() => {\n      if (obj) {\n        centerAndScaleObject(obj)\n      }\n    }, [obj])\n\n    return (\n      <group ref={modelRef}>\n        <primitive object={obj} />\n      </group>\n    )\n  }\n\n  return null\n}"],"mappings":";;AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAASC,SAAS,QAAQ,sCAAsC;AAChE,SAASC,SAAS,QAAQ,sCAAsC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEhE,OAAO,SAASC,YAAYA,CAAAC,IAAA,EAAgB;EAAAC,EAAA;EAAA,IAAbC,GAAG,GAAAF,IAAA,CAAHE,GAAG;IAAEC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EACtC,IAAMC,QAAQ,GAAGd,MAAM,EAAE;EAEzB,IAAMe,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,MAAM,EAAK;IACvC,IAAMC,GAAG,GAAG,IAAIb,KAAK,CAACc,IAAI,EAAE,CAACC,aAAa,CAACH,MAAM,CAAC;IAClD,IAAMI,MAAM,GAAGH,GAAG,CAACI,SAAS,CAAC,IAAIjB,KAAK,CAACkB,OAAO,EAAE,CAAC;IACjD,IAAMC,IAAI,GAAGN,GAAG,CAACO,OAAO,CAAC,IAAIpB,KAAK,CAACkB,OAAO,EAAE,CAAC;IAE7C,IAAMG,MAAM,GAAGC,IAAI,CAACC,GAAG,CAACJ,IAAI,CAACK,CAAC,EAAEL,IAAI,CAACM,CAAC,EAAEN,IAAI,CAACO,CAAC,CAAC;IAC/C,IAAMC,KAAK,GAAG,CAAC,GAAGN,MAAM;IAExB,IAAIX,QAAQ,CAACkB,OAAO,EAAE;MACpBlB,QAAQ,CAACkB,OAAO,CAACC,QAAQ,CAACC,GAAG,CAAC,CAACd,MAAM,CAACQ,CAAC,EAAE,CAACR,MAAM,CAACS,CAAC,EAAE,CAACT,MAAM,CAACU,CAAC,CAAC;MAC9DhB,QAAQ,CAACkB,OAAO,CAACD,KAAK,CAACI,SAAS,CAACJ,KAAK,CAAC;IACzC;EACF,CAAC;;EAED;EACA,IAAIlB,IAAI,KAAK,KAAK,IAAIA,IAAI,KAAK,MAAM,EAAE;IACrC,IAAMuB,IAAI,GAAGjC,OAAO,CAACS,GAAG,CAAC;IAEzBX,SAAS,CAAC,YAAM;MACd,IAAImC,IAAI,CAACC,KAAK,EAAE;QACdtB,oBAAoB,CAACqB,IAAI,CAACC,KAAK,CAAC;MAClC;IACF,CAAC,EAAE,CAACD,IAAI,CAAC,CAAC;IAEV,oBACE5B,OAAA;MAAO8B,GAAG,EAAExB,QAAS;MAAAyB,QAAA,eACnB/B,OAAA;QAAWQ,MAAM,EAAEoB,IAAI,CAACC;MAAM;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAC3B;EAEZ;;EAEA;EACA,IAAI9B,IAAI,KAAK,KAAK,EAAE;IAClB,IAAI;MACF,IAAM+B,GAAG,GAAG1C,SAAS,CAACG,SAAS,EAAEO,GAAG,CAAC;MAErCX,SAAS,CAAC,YAAM;QACd,IAAI2C,GAAG,EAAE;UACP7B,oBAAoB,CAAC6B,GAAG,CAAC;;UAEzB;UACAA,GAAG,CAACC,QAAQ,CAAC,UAACC,KAAK,EAAK;YACtB,IAAIA,KAAK,CAACC,MAAM,EAAE;cAChBD,KAAK,CAACE,UAAU,GAAG,IAAI;cACvBF,KAAK,CAACG,aAAa,GAAG,IAAI;;cAE1B;cACA,IAAIH,KAAK,CAACI,QAAQ,EAAE;gBAClBJ,KAAK,CAACI,QAAQ,CAACC,KAAK,GAAG,IAAI/C,KAAK,CAACgD,KAAK,CAAC,OAAO,CAAC;gBAC/CN,KAAK,CAACI,QAAQ,CAACG,WAAW,GAAG,IAAI;cACnC;YACF;UACF,CAAC,CAAC;QACJ;MACF,CAAC,EAAE,CAACT,GAAG,CAAC,CAAC;MAET,oBACEpC,OAAA;QAAO8B,GAAG,EAAExB,QAAS;QAAAyB,QAAA,eACnB/B,OAAA;UAAWQ,MAAM,EAAE4B;QAAI;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAG;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACpB;IAEZ,CAAC,CAAC,OAAOW,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1C,OAAO,IAAI;IACb;EACF;;EAEA;EACA,IAAIzC,IAAI,KAAK,KAAK,EAAE;IAClB,IAAM2C,GAAG,GAAGtD,SAAS,CAACI,SAAS,EAAEM,GAAG,CAAC;IAErCX,SAAS,CAAC,YAAM;MACd,IAAIuD,GAAG,EAAE;QACPzC,oBAAoB,CAACyC,GAAG,CAAC;MAC3B;IACF,CAAC,EAAE,CAACA,GAAG,CAAC,CAAC;IAET,oBACEhD,OAAA;MAAO8B,GAAG,EAAExB,QAAS;MAAAyB,QAAA,eACnB/B,OAAA;QAAWQ,MAAM,EAAEwC;MAAI;QAAAhB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACpB;EAEZ;EAEA,OAAO,IAAI;AACb;AAAChC,EAAA,CAxFeF,YAAY;EAAA,QAmBXN,OAAO,EAkBND,SAAS,EAmCXA,SAAS;AAAA;AAAAuD,EAAA,GAxEThD,YAAY;AAAA,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}