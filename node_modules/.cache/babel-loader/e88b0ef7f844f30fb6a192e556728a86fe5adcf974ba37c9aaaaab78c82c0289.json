{"ast":null,"code":"var _jsxFileName = \"/Users/ewang/Documents/Github/ascii-renderer/src/components/DynamicModel.js\",\n  _s = $RefreshSig$();\nimport { useLoader } from \"@react-three/fiber\";\nimport { useGLTF } from \"@react-three/drei\";\nimport { useEffect, useRef } from \"react\";\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\nimport * as THREE from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function DynamicModel(_ref) {\n  _s();\n  var url = _ref.url,\n    type = _ref.type;\n  var modelRef = useRef();\n  var centerAndScaleObject = function centerAndScaleObject(object) {\n    var box = new THREE.Box3().setFromObject(object);\n    var center = box.getCenter(new THREE.Vector3());\n    var size = box.getSize(new THREE.Vector3());\n\n    // Get the maximum dimension\n    var maxDim = Math.max(size.x, size.y, size.z);\n    var scale = 4 / maxDim; // Slightly smaller scale\n\n    // Apply the transformation to the group instead of the object\n    modelRef.current.position.set(-center.x, -center.y, -center.z);\n    modelRef.current.scale.setScalar(scale);\n  };\n\n  // Handle GLTF/GLB files\n  if (type === 'glb' || type === 'gltf') {\n    var gltf = useGLTF(url);\n    useEffect(function () {\n      if (gltf.scene) {\n        centerAndScaleObject(gltf.scene);\n      }\n    }, [gltf]);\n    return /*#__PURE__*/_jsxDEV(\"group\", {\n      ref: modelRef,\n      children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n        object: gltf.scene\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Handle FBX files\n  if (type === 'fbx') {\n    var fbx = useLoader(FBXLoader, url);\n    useEffect(function () {\n      if (fbx) {\n        centerAndScaleObject(fbx);\n        fbx.traverse(function (child) {\n          if (child.isMesh) {\n            child.castShadow = true;\n            child.receiveShadow = true;\n            child.material.needsUpdate = true;\n          }\n        });\n      }\n    }, [fbx]);\n    return /*#__PURE__*/_jsxDEV(\"group\", {\n      ref: modelRef,\n      children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n        object: fbx\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Handle OBJ files\n  if (type === 'obj') {\n    var obj = useLoader(OBJLoader, url);\n    useEffect(function () {\n      if (obj) {\n        centerAndScaleObject(obj);\n      }\n    }, [obj]);\n    return /*#__PURE__*/_jsxDEV(\"group\", {\n      ref: modelRef,\n      children: /*#__PURE__*/_jsxDEV(\"primitive\", {\n        object: obj\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n}\n_s(DynamicModel, \"CdB3VPsrJ5QVjhIKdehQaKr+cuY=\", false, function () {\n  return [useGLTF, useLoader, useLoader];\n});\n_c = DynamicModel;\nvar _c;\n$RefreshReg$(_c, \"DynamicModel\");","map":{"version":3,"names":["useLoader","useGLTF","useEffect","useRef","GLTFLoader","OBJLoader","FBXLoader","THREE","jsxDEV","_jsxDEV","DynamicModel","_ref","_s","url","type","modelRef","centerAndScaleObject","object","box","Box3","setFromObject","center","getCenter","Vector3","size","getSize","maxDim","Math","max","x","y","z","scale","current","position","set","setScalar","gltf","scene","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","fbx","traverse","child","isMesh","castShadow","receiveShadow","material","needsUpdate","obj","_c","$RefreshReg$"],"sources":["/Users/ewang/Documents/Github/ascii-renderer/src/components/DynamicModel.js"],"sourcesContent":["import { useLoader } from \"@react-three/fiber\";\nimport { useGLTF } from \"@react-three/drei\";\nimport { useEffect, useRef } from \"react\";\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\nimport * as THREE from 'three'\n\nexport function DynamicModel({ url, type }) {\n  const modelRef = useRef()\n\n  const centerAndScaleObject = (object) => {\n    const box = new THREE.Box3().setFromObject(object)\n    const center = box.getCenter(new THREE.Vector3())\n    const size = box.getSize(new THREE.Vector3())\n\n    // Get the maximum dimension\n    const maxDim = Math.max(size.x, size.y, size.z)\n    const scale = 4 / maxDim // Slightly smaller scale\n\n    // Apply the transformation to the group instead of the object\n    modelRef.current.position.set(-center.x, -center.y, -center.z)\n    modelRef.current.scale.setScalar(scale)\n  }\n\n  // Handle GLTF/GLB files\n  if (type === 'glb' || type === 'gltf') {\n    const gltf = useGLTF(url)\n    \n    useEffect(() => {\n      if (gltf.scene) {\n        centerAndScaleObject(gltf.scene)\n      }\n    }, [gltf])\n\n    return (\n      <group ref={modelRef}>\n        <primitive object={gltf.scene} />\n      </group>\n    )\n  }\n\n  // Handle FBX files\n  if (type === 'fbx') {\n    const fbx = useLoader(FBXLoader, url)\n    \n    useEffect(() => {\n      if (fbx) {\n        centerAndScaleObject(fbx)\n        \n        fbx.traverse((child) => {\n          if (child.isMesh) {\n            child.castShadow = true\n            child.receiveShadow = true\n            child.material.needsUpdate = true\n          }\n        })\n      }\n    }, [fbx])\n\n    return (\n      <group ref={modelRef}>\n        <primitive object={fbx} />\n      </group>\n    )\n  }\n\n  // Handle OBJ files\n  if (type === 'obj') {\n    const obj = useLoader(OBJLoader, url)\n    \n    useEffect(() => {\n      if (obj) {\n        centerAndScaleObject(obj)\n      }\n    }, [obj])\n\n    return (\n      <group ref={modelRef}>\n        <primitive object={obj} />\n      </group>\n    )\n  }\n\n  return null\n}"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SAASC,UAAU,QAAQ,uCAAuC;AAClE,SAASC,SAAS,QAAQ,sCAAsC;AAChE,SAASC,SAAS,QAAQ,sCAAsC;AAChE,OAAO,KAAKC,KAAK,MAAM,OAAO;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9B,OAAO,SAASC,YAAYA,CAAAC,IAAA,EAAgB;EAAAC,EAAA;EAAA,IAAbC,GAAG,GAAAF,IAAA,CAAHE,GAAG;IAAEC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EACtC,IAAMC,QAAQ,GAAGZ,MAAM,EAAE;EAEzB,IAAMa,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,MAAM,EAAK;IACvC,IAAMC,GAAG,GAAG,IAAIX,KAAK,CAACY,IAAI,EAAE,CAACC,aAAa,CAACH,MAAM,CAAC;IAClD,IAAMI,MAAM,GAAGH,GAAG,CAACI,SAAS,CAAC,IAAIf,KAAK,CAACgB,OAAO,EAAE,CAAC;IACjD,IAAMC,IAAI,GAAGN,GAAG,CAACO,OAAO,CAAC,IAAIlB,KAAK,CAACgB,OAAO,EAAE,CAAC;;IAE7C;IACA,IAAMG,MAAM,GAAGC,IAAI,CAACC,GAAG,CAACJ,IAAI,CAACK,CAAC,EAAEL,IAAI,CAACM,CAAC,EAAEN,IAAI,CAACO,CAAC,CAAC;IAC/C,IAAMC,KAAK,GAAG,CAAC,GAAGN,MAAM,EAAC;;IAEzB;IACAX,QAAQ,CAACkB,OAAO,CAACC,QAAQ,CAACC,GAAG,CAAC,CAACd,MAAM,CAACQ,CAAC,EAAE,CAACR,MAAM,CAACS,CAAC,EAAE,CAACT,MAAM,CAACU,CAAC,CAAC;IAC9DhB,QAAQ,CAACkB,OAAO,CAACD,KAAK,CAACI,SAAS,CAACJ,KAAK,CAAC;EACzC,CAAC;;EAED;EACA,IAAIlB,IAAI,KAAK,KAAK,IAAIA,IAAI,KAAK,MAAM,EAAE;IACrC,IAAMuB,IAAI,GAAGpC,OAAO,CAACY,GAAG,CAAC;IAEzBX,SAAS,CAAC,YAAM;MACd,IAAImC,IAAI,CAACC,KAAK,EAAE;QACdtB,oBAAoB,CAACqB,IAAI,CAACC,KAAK,CAAC;MAClC;IACF,CAAC,EAAE,CAACD,IAAI,CAAC,CAAC;IAEV,oBACE5B,OAAA;MAAO8B,GAAG,EAAExB,QAAS;MAAAyB,QAAA,eACnB/B,OAAA;QAAWQ,MAAM,EAAEoB,IAAI,CAACC;MAAM;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAC3B;EAEZ;;EAEA;EACA,IAAI9B,IAAI,KAAK,KAAK,EAAE;IAClB,IAAM+B,GAAG,GAAG7C,SAAS,CAACM,SAAS,EAAEO,GAAG,CAAC;IAErCX,SAAS,CAAC,YAAM;MACd,IAAI2C,GAAG,EAAE;QACP7B,oBAAoB,CAAC6B,GAAG,CAAC;QAEzBA,GAAG,CAACC,QAAQ,CAAC,UAACC,KAAK,EAAK;UACtB,IAAIA,KAAK,CAACC,MAAM,EAAE;YAChBD,KAAK,CAACE,UAAU,GAAG,IAAI;YACvBF,KAAK,CAACG,aAAa,GAAG,IAAI;YAC1BH,KAAK,CAACI,QAAQ,CAACC,WAAW,GAAG,IAAI;UACnC;QACF,CAAC,CAAC;MACJ;IACF,CAAC,EAAE,CAACP,GAAG,CAAC,CAAC;IAET,oBACEpC,OAAA;MAAO8B,GAAG,EAAExB,QAAS;MAAAyB,QAAA,eACnB/B,OAAA;QAAWQ,MAAM,EAAE4B;MAAI;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACpB;EAEZ;;EAEA;EACA,IAAI9B,IAAI,KAAK,KAAK,EAAE;IAClB,IAAMuC,GAAG,GAAGrD,SAAS,CAACK,SAAS,EAAEQ,GAAG,CAAC;IAErCX,SAAS,CAAC,YAAM;MACd,IAAImD,GAAG,EAAE;QACPrC,oBAAoB,CAACqC,GAAG,CAAC;MAC3B;IACF,CAAC,EAAE,CAACA,GAAG,CAAC,CAAC;IAET,oBACE5C,OAAA;MAAO8B,GAAG,EAAExB,QAAS;MAAAyB,QAAA,eACnB/B,OAAA;QAAWQ,MAAM,EAAEoC;MAAI;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACpB;EAEZ;EAEA,OAAO,IAAI;AACb;AAAChC,EAAA,CA7EeF,YAAY;EAAA,QAmBXT,OAAO,EAiBRD,SAAS,EAyBTA,SAAS;AAAA;AAAAsD,EAAA,GA7DT5C,YAAY;AAAA,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}