{"ast":null,"code":"import{useLoader}from\"@react-three/fiber\";import{useGLTF}from\"@react-three/drei\";import{useEffect,useRef}from\"react\";import{GLTFLoader}from'three/examples/jsm/loaders/GLTFLoader';import{OBJLoader}from'three/examples/jsm/loaders/OBJLoader';import{FBXLoader}from'three/examples/jsm/loaders/FBXLoader';import*as THREE from'three';import{jsx as _jsx}from\"react/jsx-runtime\";export function DynamicModel(_ref){var url=_ref.url,type=_ref.type;var modelRef=useRef();// Load models based on type\nvar gltf=type==='glb'||type==='gltf'?useGLTF(url):null;var fbx=type==='fbx'?useLoader(FBXLoader,url):null;var obj=type==='obj'?useLoader(OBJLoader,url):null;useEffect(function(){if(fbx){fbx.position.set(0,-2,0);fbx.scale.set(0.001,0.001,0.001);// Adjust scaling as needed\nfbx.traverse(function(child){if(child.isMesh){child.castShadow=true;child.receiveShadow=true;child.material.needsUpdate=true;}});var box=new THREE.Box3().setFromObject(fbx);var size=new THREE.Vector3();box.getSize(size);console.log('Model size:',size);console.log('Model position:',fbx.position);}},[fbx]);// Return appropriate JSX based on type\nif(type==='glb'||type==='gltf'){return/*#__PURE__*/_jsx(\"group\",{ref:modelRef,dispose:null,children:/*#__PURE__*/_jsx(\"primitive\",{object:gltf.scene,position:[0,0,0],scale:[2,2,2]})});}if(type==='fbx'){return/*#__PURE__*/_jsx(\"group\",{ref:modelRef,children:/*#__PURE__*/_jsx(\"primitive\",{object:fbx,dispose:null})});}if(type==='obj'){return/*#__PURE__*/_jsx(\"primitive\",{object:obj,ref:modelRef});}return null;}","map":{"version":3,"names":["useLoader","useGLTF","useEffect","useRef","GLTFLoader","OBJLoader","FBXLoader","THREE","jsx","_jsx","DynamicModel","_ref","url","type","modelRef","gltf","fbx","obj","position","set","scale","traverse","child","isMesh","castShadow","receiveShadow","material","needsUpdate","box","Box3","setFromObject","size","Vector3","getSize","console","log","ref","dispose","children","object","scene"],"sources":["/Users/ewang/Documents/Github/ascii-renderer/src/components/DynamicModel.js"],"sourcesContent":["import { useLoader } from \"@react-three/fiber\";\nimport { useGLTF } from \"@react-three/drei\";\nimport { useEffect, useRef } from \"react\";\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\nimport * as THREE from 'three'\n\nexport function DynamicModel({ url, type }) {\n  const modelRef = useRef()\n  \n  // Load models based on type\n  const gltf = (type === 'glb' || type === 'gltf') ? useGLTF(url) : null\n  const fbx = type === 'fbx' ? useLoader(FBXLoader, url) : null\n  const obj = type === 'obj' ? useLoader(OBJLoader, url) : null\n\n  useEffect(() => {\n    if (fbx) {\n      fbx.position.set(0, -2, 0)\n      fbx.scale.set(0.001, 0.001, 0.001) // Adjust scaling as needed\n      \n      fbx.traverse((child) => {\n        if (child.isMesh) {\n          child.castShadow = true\n          child.receiveShadow = true\n          child.material.needsUpdate = true\n        }\n      })\n\n      const box = new THREE.Box3().setFromObject(fbx)\n      const size = new THREE.Vector3()\n      box.getSize(size)\n      console.log('Model size:', size)\n      console.log('Model position:', fbx.position)\n    }\n  }, [fbx])\n\n  // Return appropriate JSX based on type\n  if (type === 'glb' || type === 'gltf') {\n    return (\n      <group ref={modelRef} dispose={null}>\n        <primitive object={gltf.scene} position={[0, 0, 0]} scale={[2, 2, 2]} />\n      </group>\n    )\n  }\n\n  if (type === 'fbx') {\n    return (\n      <group ref={modelRef}>\n        <primitive object={fbx} dispose={null} />\n      </group>\n    )\n  }\n\n  if (type === 'obj') {\n    return <primitive object={obj} ref={modelRef} />\n  }\n\n  return null\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}