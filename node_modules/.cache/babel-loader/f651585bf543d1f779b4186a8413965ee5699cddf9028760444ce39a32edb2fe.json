{"ast":null,"code":"import{useEffect,useMemo,useCallback}from'react';import{useThree}from'@react-three/fiber';import{AsciiEffect}from'three-stdlib';import*as THREE from'three';export function AsciiRenderer(_ref){var _ref$bgColor=_ref.bgColor,bgColor=_ref$bgColor===void 0?'#000000':_ref$bgColor,_ref$fgColor=_ref.fgColor,fgColor=_ref$fgColor===void 0?'#ffffff':_ref$fgColor,_ref$characters=_ref.characters,characters=_ref$characters===void 0?'@%#*+=-:. ':_ref$characters,_ref$invert=_ref.invert,invert=_ref$invert===void 0?true:_ref$invert,_ref$color=_ref.color,color=_ref$color===void 0?false:_ref$color,_ref$resolution=_ref.resolution,resolution=_ref$resolution===void 0?0.15:_ref$resolution,_ref$isAscii=_ref.isAscii,isAscii=_ref$isAscii===void 0?true:_ref$isAscii,_ref$fontSize=_ref.fontSize,fontSize=_ref$fontSize===void 0?'16px':_ref$fontSize,_ref$lineHeight=_ref.lineHeight,lineHeight=_ref$lineHeight===void 0?'0.8':_ref$lineHeight;var _useThree=useThree(),gl=_useThree.gl,scene=_useThree.scene,camera=_useThree.camera,size=_useThree.size;// Create ASCII effect\nvar effect=useMemo(function(){var asciiEffect=new AsciiEffect(gl,characters,{invert:invert,color:color,resolution:resolution});// Set initial size\nasciiEffect.setSize(size.width,size.height);// Style the ASCII canvas\nObject.assign(asciiEffect.domElement.style,{position:'absolute',top:'0',left:'0',width:'100%',height:'100%',backgroundColor:bgColor,color:fgColor,fontFamily:'monospace',whiteSpace:'pre',margin:'0',fontSize:fontSize,// Updated\nlineHeight:lineHeight// Updated\n});return asciiEffect;},[gl,characters,invert,color,resolution,bgColor,fgColor,size,fontSize,lineHeight]);// Handle mounting/unmounting\nuseEffect(function(){var parent=gl.domElement.parentElement;if(parent&&isAscii){parent.appendChild(effect.domElement);gl.domElement.style.display='none';}return function(){if(parent&&isAscii){parent.removeChild(effect.domElement);gl.domElement.style.display='block';}};},[gl,effect,isAscii]);// Handle resizing\nuseEffect(function(){var handleResize=function handleResize(){var newResolution=window.innerWidth<600?0.2:resolution;effect.setSize(size.width,size.height);effect.resolution=newResolution;gl.setSize(size.width,size.height);if(camera instanceof THREE.PerspectiveCamera){camera.aspect=size.width/size.height;camera.updateProjectionMatrix();}// Adjust font size and line height based on window size\neffect.domElement.style.fontSize=window.innerWidth<600?'12px':fontSize;effect.domElement.style.lineHeight=window.innerWidth<600?'0.6':lineHeight;};window.addEventListener('resize',handleResize);handleResize();return function(){return window.removeEventListener('resize',handleResize);};},[gl,effect,camera,size,resolution,fontSize,lineHeight]);// Render loop\nuseEffect(function(){var render=function render(){if(isAscii){effect.render(scene,camera);}else{gl.render(scene,camera);}};gl.setAnimationLoop(render);return function(){gl.setAnimationLoop(null);};},[gl,scene,camera,effect,isAscii]);return null;// No JSX to render inside Canvas\n}","map":{"version":3,"names":["useEffect","useMemo","useCallback","useThree","AsciiEffect","THREE","AsciiRenderer","_ref","_ref$bgColor","bgColor","_ref$fgColor","fgColor","_ref$characters","characters","_ref$invert","invert","_ref$color","color","_ref$resolution","resolution","_ref$isAscii","isAscii","_ref$fontSize","fontSize","_ref$lineHeight","lineHeight","_useThree","gl","scene","camera","size","effect","asciiEffect","setSize","width","height","Object","assign","domElement","style","position","top","left","backgroundColor","fontFamily","whiteSpace","margin","parent","parentElement","appendChild","display","removeChild","handleResize","newResolution","window","innerWidth","PerspectiveCamera","aspect","updateProjectionMatrix","addEventListener","removeEventListener","render","setAnimationLoop"],"sources":["/Users/ewang/Documents/Github/ascii-renderer/src/components/AsciiRenderer.js"],"sourcesContent":["import { useEffect, useMemo, useCallback } from 'react'\nimport { useThree } from '@react-three/fiber'\nimport { AsciiEffect } from 'three-stdlib'\nimport * as THREE from 'three'\n\nexport function AsciiRenderer({\n  bgColor = '#000000',\n  fgColor = '#ffffff',\n  characters = '@%#*+=-:. ',\n  invert = true,\n  color = false,\n  resolution = 0.15,\n  isAscii = true,\n  fontSize = '16px',\n  lineHeight = '0.8'\n}) {\n  const { gl, scene, camera, size } = useThree()\n\n  // Create ASCII effect\n  const effect = useMemo(() => {\n    const asciiEffect = new AsciiEffect(gl, characters, {\n      invert,\n      color,\n      resolution\n    })\n\n    // Set initial size\n    asciiEffect.setSize(size.width, size.height)\n    \n    // Style the ASCII canvas\n    Object.assign(asciiEffect.domElement.style, {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '100%',\n      height: '100%',\n      backgroundColor: bgColor,\n      color: fgColor,\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      margin: '0',\n      fontSize: fontSize,       // Updated\n      lineHeight: lineHeight    // Updated\n    })\n\n    return asciiEffect\n  }, [gl, characters, invert, color, resolution, bgColor, fgColor, size, fontSize, lineHeight])\n\n  // Handle mounting/unmounting\n  useEffect(() => {\n    const parent = gl.domElement.parentElement\n    if (parent && isAscii) {\n      parent.appendChild(effect.domElement)\n      gl.domElement.style.display = 'none'\n    }\n    \n    return () => {\n      if (parent && isAscii) {\n        parent.removeChild(effect.domElement)\n        gl.domElement.style.display = 'block'\n      }\n    }\n  }, [gl, effect, isAscii])\n\n  // Handle resizing\n  useEffect(() => {\n    const handleResize = () => {\n      const newResolution = window.innerWidth < 600 ? 0.2 : resolution\n      effect.setSize(size.width, size.height)\n      effect.resolution = newResolution\n      gl.setSize(size.width, size.height)\n      \n      if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = size.width / size.height\n        camera.updateProjectionMatrix()\n      }\n\n      // Adjust font size and line height based on window size\n      effect.domElement.style.fontSize = window.innerWidth < 600 ? '12px' : fontSize\n      effect.domElement.style.lineHeight = window.innerWidth < 600 ? '0.6' : lineHeight\n    }\n\n    window.addEventListener('resize', handleResize)\n    handleResize()\n    \n    return () => window.removeEventListener('resize', handleResize)\n  }, [gl, effect, camera, size, resolution, fontSize, lineHeight])\n\n  // Render loop\n  useEffect(() => {\n    const render = () => {\n      if (isAscii) {\n        effect.render(scene, camera)\n      } else {\n        gl.render(scene, camera)\n      }\n    }\n    gl.setAnimationLoop(render)\n    return () => {\n      gl.setAnimationLoop(null)\n    }\n  }, [gl, scene, camera, effect, isAscii])\n\n  return null // No JSX to render inside Canvas\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}