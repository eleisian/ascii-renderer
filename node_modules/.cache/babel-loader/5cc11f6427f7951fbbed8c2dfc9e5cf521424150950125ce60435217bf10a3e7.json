{"ast":null,"code":"import _slicedToArray from \"/Users/ewang/Documents/Github/ascii-renderer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/ewang/Documents/Github/ascii-renderer/src/components/AsciiRenderer.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useMemo, useState, useCallback } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport { AsciiEffect } from 'three-stdlib';\nimport * as THREE from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function AsciiRenderer(_ref) {\n  _s();\n  var _ref$renderIndex = _ref.renderIndex,\n    renderIndex = _ref$renderIndex === void 0 ? 1 : _ref$renderIndex,\n    _ref$bgColor = _ref.bgColor,\n    bgColor = _ref$bgColor === void 0 ? '#000000' : _ref$bgColor,\n    _ref$fgColor = _ref.fgColor,\n    fgColor = _ref$fgColor === void 0 ? '#ffffff' : _ref$fgColor,\n    _ref$characters = _ref.characters,\n    characters = _ref$characters === void 0 ? '@%#*+=-:. ' : _ref$characters,\n    _ref$invert = _ref.invert,\n    invert = _ref$invert === void 0 ? true : _ref$invert,\n    _ref$color = _ref.color,\n    color = _ref$color === void 0 ? false : _ref$color,\n    _ref$resolution = _ref.resolution,\n    resolution = _ref$resolution === void 0 ? 0.15 : _ref$resolution,\n    _ref$enableToggle = _ref.enableToggle,\n    enableToggle = _ref$enableToggle === void 0 ? true : _ref$enableToggle,\n    _ref$initialAscii = _ref.initialAscii,\n    initialAscii = _ref$initialAscii === void 0 ? true : _ref$initialAscii;\n  var _useThree = useThree(),\n    gl = _useThree.gl,\n    scene = _useThree.scene,\n    camera = _useThree.camera,\n    size = _useThree.size;\n  var _useState = useState(initialAscii),\n    _useState2 = _slicedToArray(_useState, 2),\n    isAscii = _useState2[0],\n    setIsAscii = _useState2[1];\n\n  // Create ASCII effect\n  var effect = useMemo(function () {\n    var asciiEffect = new AsciiEffect(gl, characters, {\n      invert: invert,\n      color: color,\n      resolution: resolution\n    });\n\n    // Set initial size\n    asciiEffect.setSize(size.width, size.height);\n\n    // Style the ASCII canvas\n    Object.assign(asciiEffect.domElement.style, {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '100%',\n      height: '100%',\n      backgroundColor: bgColor,\n      color: fgColor,\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      margin: '0',\n      fontSize: '16px',\n      lineHeight: '0.8'\n    });\n    return asciiEffect;\n  }, [gl, characters, invert, color, resolution, bgColor, fgColor, size]);\n\n  // Handle mounting/unmounting\n  useEffect(function () {\n    var parent = gl.domElement.parentElement;\n    if (parent && isAscii) {\n      parent.appendChild(effect.domElement);\n      gl.domElement.style.display = 'none';\n    }\n    return function () {\n      if (parent && isAscii) {\n        parent.removeChild(effect.domElement);\n        gl.domElement.style.display = 'block';\n      }\n    };\n  }, [gl, effect, isAscii]);\n\n  // Handle resizing\n  useEffect(function () {\n    var handleResize = function handleResize() {\n      var newResolution = window.innerWidth < 600 ? 0.2 : resolution;\n      effect.setSize(size.width, size.height);\n      effect.resolution = newResolution;\n      gl.setSize(size.width, size.height);\n      if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = size.width / size.height;\n        camera.updateProjectionMatrix();\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    handleResize();\n    return function () {\n      return window.removeEventListener('resize', handleResize);\n    };\n  }, [gl, effect, camera, size, resolution]);\n\n  // Render loop\n  useEffect(function () {\n    var render = function render() {\n      if (isAscii) {\n        effect.render(scene, camera);\n      } else {\n        gl.render(scene, camera);\n      }\n    };\n    gl.setAnimationLoop(render);\n    return function () {\n      gl.setAnimationLoop(null);\n    };\n  }, [gl, scene, camera, effect, isAscii]);\n\n  // Toggle ASCII effect\n  var toggleAscii = useCallback(function () {\n    setIsAscii(function (prev) {\n      return !prev;\n    });\n  }, []);\n  return enableToggle ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: toggleAscii,\n      style: {\n        position: 'absolute',\n        top: '10px',\n        left: '10px',\n        padding: '8px 12px',\n        background: '#fff',\n        border: 'none',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        zIndex: 1\n      },\n      children: isAscii ? 'Switch to Normal' : 'Switch to ASCII'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), \"null\"]\n  }, void 0, true) : null;\n}\n_s(AsciiRenderer, \"ErbrDJMXnbr+QhJnuDJc77GFcrs=\", false, function () {\n  return [useThree];\n});\n_c = AsciiRenderer;\nvar _c;\n$RefreshReg$(_c, \"AsciiRenderer\");","map":{"version":3,"names":["useEffect","useMemo","useState","useCallback","useThree","AsciiEffect","THREE","jsxDEV","_jsxDEV","Fragment","_Fragment","AsciiRenderer","_ref","_s","_ref$renderIndex","renderIndex","_ref$bgColor","bgColor","_ref$fgColor","fgColor","_ref$characters","characters","_ref$invert","invert","_ref$color","color","_ref$resolution","resolution","_ref$enableToggle","enableToggle","_ref$initialAscii","initialAscii","_useThree","gl","scene","camera","size","_useState","_useState2","_slicedToArray","isAscii","setIsAscii","effect","asciiEffect","setSize","width","height","Object","assign","domElement","style","position","top","left","backgroundColor","fontFamily","whiteSpace","margin","fontSize","lineHeight","parent","parentElement","appendChild","display","removeChild","handleResize","newResolution","window","innerWidth","PerspectiveCamera","aspect","updateProjectionMatrix","addEventListener","removeEventListener","render","setAnimationLoop","toggleAscii","prev","children","onClick","padding","background","border","borderRadius","cursor","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ewang/Documents/Github/ascii-renderer/src/components/AsciiRenderer.js"],"sourcesContent":["import { useEffect, useMemo, useState, useCallback } from 'react'\nimport { useThree } from '@react-three/fiber'\nimport { AsciiEffect } from 'three-stdlib'\nimport * as THREE from 'three'\n\nexport function AsciiRenderer({\n  renderIndex = 1,\n  bgColor = '#000000',\n  fgColor = '#ffffff',\n  characters = '@%#*+=-:. ',\n  invert = true,\n  color = false,\n  resolution = 0.15,\n  enableToggle = true,\n  initialAscii = true\n}) {\n  const { gl, scene, camera, size } = useThree()\n  const [isAscii, setIsAscii] = useState(initialAscii)\n\n  // Create ASCII effect\n  const effect = useMemo(() => {\n    const asciiEffect = new AsciiEffect(gl, characters, {\n      invert,\n      color,\n      resolution\n    })\n\n    // Set initial size\n    asciiEffect.setSize(size.width, size.height)\n    \n    // Style the ASCII canvas\n    Object.assign(asciiEffect.domElement.style, {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '100%',\n      height: '100%',\n      backgroundColor: bgColor,\n      color: fgColor,\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      margin: '0',\n      fontSize: '16px',\n      lineHeight: '0.8'\n    })\n\n    return asciiEffect\n  }, [gl, characters, invert, color, resolution, bgColor, fgColor, size])\n\n  // Handle mounting/unmounting\n  useEffect(() => {\n    const parent = gl.domElement.parentElement\n    if (parent && isAscii) {\n      parent.appendChild(effect.domElement)\n      gl.domElement.style.display = 'none'\n    }\n    \n    return () => {\n      if (parent && isAscii) {\n        parent.removeChild(effect.domElement)\n        gl.domElement.style.display = 'block'\n      }\n    }\n  }, [gl, effect, isAscii])\n\n  // Handle resizing\n  useEffect(() => {\n    const handleResize = () => {\n      const newResolution = window.innerWidth < 600 ? 0.2 : resolution\n      effect.setSize(size.width, size.height)\n      effect.resolution = newResolution\n      gl.setSize(size.width, size.height)\n      \n      if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = size.width / size.height\n        camera.updateProjectionMatrix()\n      }\n    }\n\n    window.addEventListener('resize', handleResize)\n    handleResize()\n    \n    return () => window.removeEventListener('resize', handleResize)\n  }, [gl, effect, camera, size, resolution])\n\n  // Render loop\n  useEffect(() => {\n    const render = () => {\n      if (isAscii) {\n        effect.render(scene, camera)\n      } else {\n        gl.render(scene, camera)\n      }\n    }\n    gl.setAnimationLoop(render)\n    return () => {\n      gl.setAnimationLoop(null)\n    }\n  }, [gl, scene, camera, effect, isAscii])\n\n  // Toggle ASCII effect\n  const toggleAscii = useCallback(() => {\n    setIsAscii(prev => !prev)\n  }, [])\n\n  return enableToggle ? (\n    <>\n      <button \n        onClick={toggleAscii}\n        style={{\n          position: 'absolute',\n          top: '10px',\n          left: '10px',\n          padding: '8px 12px',\n          background: '#fff',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer',\n          zIndex: 1\n        }}\n      >\n        {isAscii ? 'Switch to Normal' : 'Switch to ASCII'}\n      </button>\n      null\n    </>\n  ) : null\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}