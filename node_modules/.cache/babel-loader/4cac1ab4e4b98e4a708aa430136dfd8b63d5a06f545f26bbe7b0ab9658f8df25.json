{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useMemo } from 'react';\nimport { useFrame, useThree } from '@react-three/fiber';\nimport { AsciiEffect } from 'three-stdlib';\nimport * as THREE from 'three';\nexport function AsciiRenderer(_ref) {\n  _s();\n  var _ref$renderIndex = _ref.renderIndex,\n    renderIndex = _ref$renderIndex === void 0 ? 1 : _ref$renderIndex,\n    _ref$bgColor = _ref.bgColor,\n    bgColor = _ref$bgColor === void 0 ? '#000000' : _ref$bgColor,\n    _ref$fgColor = _ref.fgColor,\n    fgColor = _ref$fgColor === void 0 ? '#ffffff' : _ref$fgColor,\n    _ref$characters = _ref.characters,\n    characters = _ref$characters === void 0 ? ' .:-+*=%@#' : _ref$characters,\n    _ref$invert = _ref.invert,\n    invert = _ref$invert === void 0 ? false : _ref$invert,\n    _ref$color = _ref.color,\n    color = _ref$color === void 0 ? false : _ref$color,\n    _ref$resolution = _ref.resolution,\n    resolution = _ref$resolution === void 0 ? 0.15 : _ref$resolution;\n  var _useThree = useThree(),\n    gl = _useThree.gl,\n    scene = _useThree.scene,\n    camera = _useThree.camera,\n    size = _useThree.size;\n\n  // Create ASCII effect\n  var effect = useMemo(function () {\n    var asciiEffect = new AsciiEffect(gl, characters, {\n      invert: invert,\n      color: color,\n      resolution: resolution\n    });\n\n    // Calculate character dimensions to maintain aspect ratio\n    var charWidth = Math.floor(size.width * resolution);\n    var charHeight = Math.floor(size.height * resolution);\n    asciiEffect.setSize(charWidth, charHeight);\n\n    // Style the ASCII canvas\n    asciiEffect.domElement.style.cssText = \"\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      background-color: \".concat(bgColor, \";\\n      color: \").concat(fgColor, \";\\n      font-family: monospace;\\n      white-space: pre;\\n      letter-spacing: 0;\\n      line-height: 1;\\n      font-size: \").concat(Math.floor(size.width / charWidth), \"px;\\n      font-weight: bold;\\n      padding: 0;\\n      margin: 0;\\n      aspect-ratio: \").concat(size.width / size.height, \";\\n    \");\n    return asciiEffect;\n  }, [gl, characters, invert, color, resolution, bgColor, fgColor, size]);\n\n  // Handle mounting/unmounting\n  useEffect(function () {\n    var parent = gl.domElement.parentElement;\n    if (parent) {\n      parent.appendChild(effect.domElement);\n      gl.domElement.style.display = 'none';\n    }\n    return function () {\n      if (parent) {\n        parent.removeChild(effect.domElement);\n        gl.domElement.style.display = 'block';\n      }\n    };\n  }, [gl, effect]);\n\n  // Handle resizing\n  useEffect(function () {\n    function handleResize() {\n      var charWidth = Math.floor(size.width * resolution);\n      var charHeight = Math.floor(size.height * resolution);\n      effect.setSize(charWidth, charHeight);\n      gl.setSize(size.width, size.height, false);\n      effect.domElement.style.fontSize = \"\".concat(Math.floor(size.width / charWidth), \"px\");\n      if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = size.width / size.height;\n        camera.updateProjectionMatrix();\n      }\n    }\n    window.addEventListener('resize', handleResize);\n    handleResize();\n    return function () {\n      return window.removeEventListener('resize', handleResize);\n    };\n  }, [gl, effect, camera, size, resolution]);\n\n  // Render loop\n  useFrame(function () {\n    effect.render(scene, camera);\n  }, renderIndex);\n  return null;\n}\n_s(AsciiRenderer, \"wQJTfpZMgacyQeAbJdA47Kn/KSk=\", false, function () {\n  return [useThree, useFrame];\n});\n_c = AsciiRenderer;\nvar _c;\n$RefreshReg$(_c, \"AsciiRenderer\");","map":{"version":3,"names":["useEffect","useMemo","useFrame","useThree","AsciiEffect","THREE","AsciiRenderer","_ref","_s","_ref$renderIndex","renderIndex","_ref$bgColor","bgColor","_ref$fgColor","fgColor","_ref$characters","characters","_ref$invert","invert","_ref$color","color","_ref$resolution","resolution","_useThree","gl","scene","camera","size","effect","asciiEffect","charWidth","Math","floor","width","charHeight","height","setSize","domElement","style","cssText","concat","parent","parentElement","appendChild","display","removeChild","handleResize","fontSize","PerspectiveCamera","aspect","updateProjectionMatrix","window","addEventListener","removeEventListener","render","_c","$RefreshReg$"],"sources":["/Users/ewang/Documents/Github/ascii-renderer/src/components/AsciiRenderer.js"],"sourcesContent":["import { useEffect, useMemo } from 'react'\nimport { useFrame, useThree } from '@react-three/fiber'\nimport { AsciiEffect } from 'three-stdlib'\nimport * as THREE from 'three'\n\nexport function AsciiRenderer({\n  renderIndex = 1,\n  bgColor = '#000000',\n  fgColor = '#ffffff',\n  characters = ' .:-+*=%@#',\n  invert = false,\n  color = false,\n  resolution = 0.15\n}) {\n  const { gl, scene, camera, size } = useThree()\n\n  // Create ASCII effect\n  const effect = useMemo(() => {\n    const asciiEffect = new AsciiEffect(gl, characters, {\n      invert,\n      color,\n      resolution\n    })\n    \n    // Calculate character dimensions to maintain aspect ratio\n    const charWidth = Math.floor(size.width * resolution)\n    const charHeight = Math.floor(size.height * resolution)\n    \n    asciiEffect.setSize(charWidth, charHeight)\n    \n    // Style the ASCII canvas\n    asciiEffect.domElement.style.cssText = `\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background-color: ${bgColor};\n      color: ${fgColor};\n      font-family: monospace;\n      white-space: pre;\n      letter-spacing: 0;\n      line-height: 1;\n      font-size: ${Math.floor(size.width / charWidth)}px;\n      font-weight: bold;\n      padding: 0;\n      margin: 0;\n      aspect-ratio: ${size.width / size.height};\n    `\n    \n    return asciiEffect\n  }, [gl, characters, invert, color, resolution, bgColor, fgColor, size])\n\n  // Handle mounting/unmounting\n  useEffect(() => {\n    const parent = gl.domElement.parentElement\n    if (parent) {\n      parent.appendChild(effect.domElement)\n      gl.domElement.style.display = 'none'\n    }\n    \n    return () => {\n      if (parent) {\n        parent.removeChild(effect.domElement)\n        gl.domElement.style.display = 'block'\n      }\n    }\n  }, [gl, effect])\n\n  // Handle resizing\n  useEffect(() => {\n    function handleResize() {\n      const charWidth = Math.floor(size.width * resolution)\n      const charHeight = Math.floor(size.height * resolution)\n      \n      effect.setSize(charWidth, charHeight)\n      gl.setSize(size.width, size.height, false)\n      \n      effect.domElement.style.fontSize = `${Math.floor(size.width / charWidth)}px`\n      \n      if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = size.width / size.height\n        camera.updateProjectionMatrix()\n      }\n    }\n\n    window.addEventListener('resize', handleResize)\n    handleResize()\n    \n    return () => window.removeEventListener('resize', handleResize)\n  }, [gl, effect, camera, size, resolution])\n\n  // Render loop\n  useFrame(() => {\n    effect.render(scene, camera)\n  }, renderIndex)\n\n  return null\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}